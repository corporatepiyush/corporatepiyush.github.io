<html>

<head>
    <meta charset="UTF-8"></meta>
    <title>Events</title>
    <script type="text/javascript" src="js-csp.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <style>
        .c_0 {
            background-color: black;
        }

        .c_1 {
            background-color: green;
        }

        .c_2 {
            background-color: blue;
        }

        .c_3 {
            background-color: orange;
        }

        .c_4 {
            background-color: purple;
        }

        .c_5 {
            background-color: pink;
        }

        .c_6 {
            background-color: grey;
        }

        .c_7 {
            background-color: magenta;
        }

        .c_8 {
            background-color: brown;
        }

        .c_9 {
            background-color: indigo;
        }
    </style>
</head>

<body style="background-color:black;color:white;margin:0;">


    <div id="container">

    </div>


    <script type="text/javascript">
        function loopIncrementer(id) {

            return function* () {
                var element = $("#" + id)
                var continueLoop = true;

                element.click(function () {
                    continueLoop = false;
                    element.css('visibility', 'hidden')

                    setTimeout(function () {
                        element.remove()
                    }, 1000)
                })

                while (continueLoop) {
                    yield csp.timeout(Math.floor(Math.random() * 500));
                    // yield csp.timeout(100);
                    var number = parseInt(element.text())
                    number = number === 9 ? 0 : number + 1
                    element.text(number)
                    element.attr('class', `c_${number}`)
                };
            }
        }


        for (var i = 0; i < 50; i++) {
            var id = `id_${i}`
            $("#container").append(
                `<div id="${id}" style="float:left;width:50px;height:50px; padding:4px;margin:10px; text-align:center; font-weight:bold;font-size:25px;border-radius:100%;line-height:2;" class="point"> ${Math.floor(Math.random() * 10)} </div>`
            )

            csp.go(loopIncrementer(id));
        }
    </script>
</body>

</html>